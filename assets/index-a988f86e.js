import{r as u,j as t,a1 as T,a2 as k,G as F,a8 as A,M as _,a3 as D,a4 as P}from"./index-21568be7.js";import{u as g,d as V,b as y,r as q,a as C,F as E,T as S}from"./useGetParams-acf1653d.js";import{F as v}from"./FormInput-7f40563c.js";import{d as G,a as O,u as j,K as w,b as I,l as J,c as K}from"./index-82ae1dd2.js";import{F as M}from"./FormSwitch-9dbcd9cb.js";import{u as U}from"./index.esm-229c0b27.js";const h={name:"",domain:"",type_service:"",status:!0},B=b=>{const{visibled:s,setVisibled:n,setParams:r}=b,{register:i,handleSubmit:l,reset:o,setValue:d,watch:m,formState:{errors:c}}=U({defaultValues:h}),e=g(G,{id:s},{}),[p,f]=u.useState([{key:"",value:""}]);u.useEffect(()=>{if(typeof s=="number"){for(const a in h)Object.hasOwnProperty.call(h,a)&&(a==="status"?d("status",e.status===1):d(a,e[a]+""||""));e.data&&f(V(e.data)||e.data)}},[JSON.stringify(e)]);const x=a=>(a.status=a.status?1:0,p&&p[0]&&(a.data=p),typeof s=="number"?{...q(a,e),id:s}:a);return t.jsx(T,{checked:typeof s=="number",title:"nhà cung cấp",visibled:s,setVisibled:n,setParams:r,handleSubmit:l,actions:{add:O,update:j},handleData:x,handleSuccess:()=>{r(a=>({...a,render:!a.render})),f([{key:"",value:""}]),o(h)},children:t.jsxs(k,{children:[t.jsxs(F,{container:!0,spacing:2,children:[t.jsx(v,{id:"name",label:"Tên nhà cung cấp (*)",register:i,errors:c,required:!0}),t.jsx(v,{id:"domain",label:"Tên miền nhà cung cấp (*)",register:i,errors:c,required:!0}),t.jsx(y,{id:"type_service",label:"Loại dịch vụ (*)",options:A,value:m("type_service"),register:i,errors:c,required:!0}),t.jsx(M,{checked:m("status"),id:"status",register:i})]}),t.jsx(w,{data:p,setData:f})]})})},W=()=>{const b=C(),[s,n]=u.useState(b),[r,i]=u.useState({key_search:"",status:""}),[l,o]=u.useState(!1),d=g(J,s,[]),m=g(K,s,0),c=[{field:"name",label:"Tên nhà cung cấp"},{field:"domain",label:"Domain"},{label:"Thời gian tạo",body:e=>S(e.created_at)},{label:"Thời gian cập nhật",body:e=>S(e.updated_at)},{label:"Trạng thái",field:"status",updateStatus:e=>j({status:e.status,id:e.id})}];return t.jsxs(_,{title:"Danh sách nhà cung cấp",children:[l&&t.jsx(B,{visibled:l,setVisibled:o,setParams:n}),t.jsxs(E,{setParams:n,filter:r,setFilter:i,sm:12,lg:6,children:[t.jsx(v,{lg:3,sm:6,label:"Tìm kiếm theo tên nhà cung cấp",value:r.key_search,onChange:e=>i({...r,key_search:e.target.value})}),t.jsx(y,{lg:3,sm:6,label:"Trạng thái",options:D,value:r.status,onChange:e=>i({...r,status:e.target.value})})]}),t.jsx(P,{params:s,setParams:n,count:m,items:d,columns:c,setVisibleDialog:o,headerInfo:!0,actionInfo:{deleteAction:I}})]})};export{W as default};
