import{c as x,j as e,r as l,u as S,a as C,S as h,I as L,b as z,F as v,C as E,T,L as A,B as F,A as I,d as B,l as M}from"./index-21568be7.js";import{u as R}from"./index.esm-229c0b27.js";import{F as D}from"./index-0529850b.js";import{R as P,F as p}from"./FormInput-7f40563c.js";const V=x(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility"),q=x(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),g=(t,o)=>{const n=P[t];return new RegExp(/[0-9]/).test,n?new RegExp(n).test(o):!1},W=()=>{const{register:t,handleSubmit:o,setError:n,formState:{errors:d}}=R(),[r,f]=l.useState(!1),[u,j]=l.useState(!0),[b,a]=l.useState(!1),{setLoadData:k}=S(),{setToast:m}=C(),w=async s=>{const i={password:s.password};if(g("email",s.username))i.email=s.username;else if(g("phone",s.username))i.phone=s.username;else{n("username",{type:"required",message:"Tài khoản không đúng định dạng email hoặc số điện thoại!"});return}a(!0);const c=await M(i);if(c&&c.status){a(!1);const y=c.data.token;localStorage.setItem("token",y),k(!0),m({severity:"success",message:"Đăng nhâp thành công!"})}else m({severity:"error",message:"Tài khoản hoặc mật khẩu không chính xác!"}),a(!1)};return e.jsx(D,{headerTitle:"Đăng nhập",footerTitle:"Bạn chưa có tài khoản, đăng ký",footerLink:"/auth/register",children:e.jsxs("form",{onSubmit:o(w),children:[e.jsxs(h,{spacing:2,children:[e.jsx(p,{lg:12,id:"username",label:"Email Address / Username",register:t,errors:d,required:!0}),e.jsx(p,{lg:12,id:"password",label:"Password",type:r?"text":"password",register:t,errors:d,required:"password",endAdornment:e.jsx(L,{position:"end",children:e.jsx(z,{"aria-label":"toggle password visibility",onClick:()=>f(!r),onMouseDown:s=>s.preventDefault(),edge:"end",size:"large",children:r?e.jsx(V,{}):e.jsx(q,{})})})}),e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:[e.jsx(v,{control:e.jsx(E,{checked:u,onChange:()=>j(!u),name:"checked",color:"primary"}),label:"Remember me"}),e.jsx(T,{component:A,to:"/auth/forgot-password",variant:"subtitle1",color:"secondary",sx:{textDecoration:"none",cursor:"pointer"},children:"Quên mật khẩu?"})]})]}),e.jsx(F,{sx:{mt:2},children:e.jsx(I,{children:e.jsx(B,{loading:b,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Đănh nhập"})})})]})})};export{W as default};
