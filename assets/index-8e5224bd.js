import{r as b,j as t,a1 as C,a2 as A,G as F,M as T,a3 as k,a4 as q}from"./index-21568be7.js";import{u,b as p,r as D,a as M,F as V,B as v,T as j}from"./useGetParams-acf1653d.js";import{F as f}from"./FormInput-7f40563c.js";import{l as x}from"./index-7abeea52.js";import{d as E,a as G,u as S,b as O,l as w,c as B}from"./index-8834b74c.js";import{F as I}from"./FormSwitch-9dbcd9cb.js";import{u as N}from"./index.esm-229c0b27.js";import{l as U}from"./index-6d2159f2.js";const _={name:"",code:"",my_service_id:"",company_id:"",status:!0},J=h=>{const{visibled:i,setVisibled:m,setParams:a,myServices:n}=h,{register:o,handleSubmit:y,reset:g,setValue:d,watch:r,formState:{errors:l}}=N({defaultValues:_}),c=u(E,{id:i},{}),e=u(x,{my_service_id:r("my_service_id")},[]);b.useEffect(()=>{if(typeof i=="number")for(const s in _)Object.hasOwnProperty.call(_,s)&&(s==="status"?d("status",c.status===1):d(s,c[s]+""||""))},[JSON.stringify(c)]);const P=s=>(s.status=s.status?1:0,typeof i=="number"?{...D(s,c),id:i}:s);return t.jsx(C,{checked:typeof i=="number",title:"dự án",visibled:i,setVisibled:m,setParams:a,handleSubmit:y,actions:{add:G,update:S},handleData:P,handleSuccess:()=>{a(s=>({...s,render:!s.render})),g(_)},children:t.jsx(A,{children:t.jsxs(F,{container:!0,spacing:2,children:[t.jsx(f,{id:"name",label:"Tên dự án (*)",register:o,errors:l,required:!0}),t.jsx(f,{id:"code",label:"Mã dự án (*)",register:o,errors:l,required:!0}),t.jsx(p,{id:"my_service_id",label:"Nhà cung cấp (*)",options:n,value:r("my_service_id"),onChange:s=>{d("my_service_id",s.target.value),d("company_id","")},register:o,errors:l,required:!0}),t.jsx(p,{id:"company_id",label:"Công ty (*)",options:r("my_service_id")?e:[],value:r("company_id"),register:o,errors:l,required:!0}),t.jsx(I,{checked:r("status"),id:"status",register:o})]})})})},Y=()=>{const h=M(),[i,m]=b.useState(h),[a,n]=b.useState({key_search:"",my_service_id:"",company_id:"",status:""}),[o,y]=b.useState(!1),g=u(w,i,[]),d=u(B,i,0),r=u(U,!1,[]),l=u(x,!1,[]),c=[{field:"name",label:"Tên dự án"},{field:"code",label:"Mã dự án"},{label:"Nhà cung cấp",body:e=>v(r,e.my_service_id)},{label:"Công ty",body:e=>v(l,e.company_id)},{label:"Thời gian tạo",body:e=>j(e.created_at)},{label:"Thời gian cập nhật",body:e=>j(e.updated_at)},{label:"Trạng thái",field:"status",updateStatus:e=>S({status:e.status,id:e.id})}];return t.jsxs(T,{title:"Danh sách dự án",children:[o&&t.jsx(J,{visibled:o,setVisibled:y,setParams:m,myServices:r}),t.jsxs(V,{setParams:m,filter:a,setFilter:n,sm:12,lg:12,children:[t.jsx(f,{lg:3,sm:6,label:"Tìm kiếm theo tên, mã",value:a.key_search,onChange:e=>n({...a,key_search:e.target.value})}),t.jsx(p,{lg:3,sm:6,label:"Ứng dụng",options:r,value:a.my_service_id,onChange:e=>n({...a,my_service_id:e.target.value,company_id:""})}),t.jsx(p,{lg:3,sm:6,label:"Công ty",options:l,value:a.company_id,onChange:e=>n({...a,company_id:e.target.value})}),t.jsx(p,{lg:3,sm:6,label:"Trạng thái",options:k,value:a.status,onChange:e=>n({...a,status:e.target.value})})]}),t.jsx(q,{params:i,setParams:m,count:d,items:g,columns:c,setVisibleDialog:y,headerInfo:!0,actionInfo:{deleteAction:O}})]})};export{Y as default};
