import{a6 as S,a7 as x,r as g,j as i,a1 as w,a2 as F,G as P,M as T,a4 as k}from"./index-21568be7.js";import{u as l,b as d,r as V,a as E,F as G,B as y,T as D}from"./useGetParams-acf1653d.js";import{l as U}from"./index-7abeea52.js";import{l as A}from"./index-8834b74c.js";import{F as O}from"./FormInput-7f40563c.js";import{u as q}from"./index.esm-229c0b27.js";import{l as B}from"./index-7bc03ba7.js";import{l as I}from"./index-6d2159f2.js";const M=s=>x("web/service_use/getListServiceUse",s),J=s=>x("web/service_use/countServiceUse",s),L=s=>S("web/service_use/deleteServiceUse",s),N=s=>x("web/service_use/getDetailServiceUse",s),R=s=>S("/web/service_use/addServiceUse",s),z=s=>S("/web/service_use/updateServiceUse",s),b={company_id:"",project_id:"",service_detail_id:"",my_service_id:"",token:""},H=s=>{const{visibled:o,setVisibled:_,setParams:r,serviceDetails:p,myServices:u}=s,{register:m,handleSubmit:j,reset:f,setValue:c,watch:t,formState:{errors:n}}=q({defaultValues:b}),v=l(U,{my_service_id:t("my_service_id")},[]),h=l(A,{my_service_id:t("my_service_id"),company_id:t("company_id")},[]),e=l(N,{id:o},{});g.useEffect(()=>{if(typeof o=="number")for(const a in b)Object.hasOwnProperty.call(b,a)&&c(a,e[a]+""||"")},[JSON.stringify(e)]);const C=a=>typeof o=="number"?{...V(a,e),id:o}:a;return i.jsx(w,{checked:typeof o=="number",title:"địa chỉ chặn",visibled:o,setVisibled:_,setParams:r,handleSubmit:j,actions:{add:R,update:z},handleData:C,handleSuccess:()=>{r(a=>({...a,render:!a.render})),f(b)},children:i.jsx(F,{children:i.jsxs(P,{container:!0,spacing:2,children:[i.jsx(d,{id:"service_detail_id",label:"Dịch vụ (*)",options:p,value:t("service_detail_id"),register:m,errors:n,required:!0}),i.jsx(d,{id:"my_service_id",label:"Ứng dụng (*)",options:u,value:t("my_service_id"),onChange:a=>{c("my_service_id",a.target.value),c("company_id",""),c("project_id","")},register:m,errors:n,required:!0}),i.jsx(d,{id:"company_id",label:"Công ty",options:t("my_service_id")?v:[],value:t("company_id"),onChange:a=>{c("company_id",a.target.value),c("project_id","")},register:m,errors:n}),i.jsx(d,{id:"project_id",label:"Dự án",options:t("company_id")?h:[],value:t("project_id"),register:m,errors:n}),typeof o=="number"&&i.jsx(O,{label:"Token",value:t("token"),errors:n,lg:12,multiline:!0,rows:6})]})})})},ie=()=>{const s=E(),[o,_]=g.useState(s),[r,p]=g.useState({service_detail_id:"",my_service_id:"",company_id:"",project_id:""}),[u,m]=g.useState(!1),j=l(M,o,[]),f=l(J,o,0),c=l(B,!1,[]),t=l(I,!1,[]),n=l(U,!1,[]),v=l(A,!1,[]),h=[{label:"Dịch vụ",body:e=>y(c,e.service_detail_id)},{label:"Ứng dụng",body:e=>y(t,e.my_service_id)},{label:"Công ty",body:e=>y(n,e.company_id)},{label:"Dự án",body:e=>y(v,e.project_id)},{label:"Thời gian tạo",body:e=>D(e.created_at)},{label:"Thời gian cập nhật",body:e=>D(e.updated_at)}];return i.jsxs(T,{title:"Danh sách dịch vụ sử dụng",children:[u&&i.jsx(H,{visibled:u,setVisibled:m,setParams:_,serviceDetails:c,myServices:t,companies:n,projects:v}),i.jsxs(G,{setParams:_,filter:r,setFilter:p,sm:12,lg:12,children:[i.jsx(d,{lg:3,sm:6,label:"Dịch vụ",options:c,value:r.service_detail_id,onChange:e=>p({...r,service_detail_id:e.target.value})}),i.jsx(d,{lg:3,sm:6,label:"Ứng dụng",options:t,value:r.my_service_id,onChange:e=>p({...r,my_service_id:e.target.value,company_id:"",project_id:""})}),i.jsx(d,{lg:3,sm:6,label:"Công ty",options:n,value:r.company_id,onChange:e=>p({...r,company_id:e.target.value,project_id:""})}),i.jsx(d,{lg:3,sm:6,label:"Dự án",options:v,value:r.project_id,onChange:e=>p({...r,project_id:e.target.value})})]}),i.jsx(k,{params:o,setParams:_,count:f,items:j,columns:h,setVisibleDialog:m,headerInfo:!0,actionInfo:{deleteAction:L}})]})};export{ie as default};
