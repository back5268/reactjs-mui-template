import{r as p,j as a,a1 as x,a2 as T,G as S,M as C,a3 as F,a4 as A}from"./index-21568be7.js";import{u as g,b as y,r as k,a as P,F as D,B as M,T as v}from"./useGetParams-acf1653d.js";import{F as f}from"./FormInput-7f40563c.js";import{d as V,a as q,u as _,b as E,l as G,c as O}from"./index-7ce5889c.js";import{F as w}from"./FormSwitch-9dbcd9cb.js";import{u as B}from"./index.esm-229c0b27.js";import{l as I}from"./index-6d2159f2.js";const m={status:!0,name:"",code:"",my_service_id:""},N=b=>{const{visibled:s,setVisibled:d,setParams:r,myServices:o}=b,{register:i,handleSubmit:c,reset:h,setValue:l,watch:n,formState:{errors:u}}=B({defaultValues:m}),e=g(V,{id:s},{});p.useEffect(()=>{if(typeof s=="number")for(const t in m)Object.hasOwnProperty.call(m,t)&&(t==="status"?l("status",e.status===1):l(t,e[t]+""||""))},[JSON.stringify(e)]);const j=t=>(t.status=t.status?1:0,typeof s=="number"?{...k(t,e),id:s}:t);return a.jsx(x,{checked:typeof s=="number",title:"loại thông báo",visibled:s,setVisibled:d,setParams:r,handleSubmit:c,actions:{add:q,update:_},handleData:j,handleSuccess:()=>{r(t=>({...t,render:!t.render})),h(m)},children:a.jsx(T,{children:a.jsxs(S,{container:!0,spacing:2,children:[a.jsx(f,{id:"name",label:"Tên loại thông báo (*)",register:i,errors:u,required:!0}),a.jsx(f,{id:"code",label:"Mã loại thông báo (*)",register:i,errors:u,required:!0}),a.jsx(y,{id:"my_service_id",label:"Ứng dụng (*)",options:o,value:n("my_service_id"),register:i,errors:u,onChange:t=>{l("company_id",""),l("my_service_id",t.target.value)},required:!0}),a.jsx(w,{checked:n("status"),id:"status",register:i})]})})})},Q=()=>{const b=P(),[s,d]=p.useState(b),[r,o]=p.useState({key_search:""}),[i,c]=p.useState(!1),h=g(G,s,[]),l=g(O,s,0),n=g(I,s,[]),u=[{field:"name",label:"Tên loại thông báo"},{field:"code",label:"Mã loại thông báo"},{label:"Ứng dụng",body:e=>M(n,e.my_service_id)},{label:"Thời gian tạo",body:e=>v(e.created_at)},{label:"Thời gian cập nhật",body:e=>v(e.updated_at)},{label:"Trạng thái",field:"status",updateStatus:e=>_({status:e.status,id:e.id})}];return a.jsxs(C,{title:"Danh sách loại thông báo",children:[i&&a.jsx(N,{visibled:i,setVisibled:c,setParams:d,myServices:n}),a.jsxs(D,{setParams:d,filter:r,setFilter:o,sm:6,children:[a.jsx(f,{lg:3,sm:6,label:"Tìm kiếm theo tên, mã",value:r.key_search,onChange:e=>o({...r,key_search:e.target.value})}),a.jsx(y,{lg:3,sm:6,label:"Nhà cung cấp",options:n,value:r.my_service_id,onChange:e=>o({...r,my_service_id:e.target.value})}),a.jsx(y,{lg:3,sm:6,label:"Trạng thái",options:F,value:r.status,onChange:e=>o({...r,status:e.target.value})})]}),a.jsx(A,{params:s,setParams:d,count:l,items:h,columns:u,setVisibleDialog:c,headerInfo:!0,actionInfo:{deleteAction:E}})]})};export{Q as default};
