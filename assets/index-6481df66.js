import{r as p,j as t,a1 as x,a2 as S,G as v,M,a3 as T,a4 as F}from"./index-21568be7.js";import{u as h,r as A,a as k,F as _,b as D,T as f}from"./useGetParams-acf1653d.js";import{F as d}from"./FormInput-7f40563c.js";import{d as P,a as q,u as y,b as V,l as C,c as E}from"./index-6d2159f2.js";import{F as G}from"./FormSwitch-9dbcd9cb.js";import{u as O}from"./index.esm-229c0b27.js";const m={name:"",code:"",domain:"",from_name:"",status:!0},w=b=>{const{visibled:s,setVisibled:l,setParams:i}=b,{register:r,handleSubmit:o,reset:u,setValue:c,watch:g,formState:{errors:n}}=O({defaultValues:m}),e=h(P,{id:s},{});p.useEffect(()=>{if(typeof s=="number")for(const a in m)Object.hasOwnProperty.call(m,a)&&(a==="status"?c("status",e.status===1):c(a,e[a]+""||""))},[JSON.stringify(e)]);const j=a=>(a.status=a.status?1:0,typeof s=="number"?{...A(a,e),id:s}:a);return t.jsx(x,{checked:typeof s=="number",title:"ứng dụng",visibled:s,setVisibled:l,setParams:i,handleSubmit:o,actions:{add:q,update:y},handleData:j,handleSuccess:()=>{i(a=>({...a,render:!a.render})),u(m)},children:t.jsx(S,{children:t.jsxs(v,{container:!0,spacing:2,children:[t.jsx(d,{id:"name",label:"Tên ứng dụng (*)",register:r,errors:n,required:!0}),t.jsx(d,{id:"code",label:"Mã ứng dụng (*)",register:r,errors:n,required:!0}),t.jsx(d,{id:"domain",label:"Tên miền (*)",register:r,errors:n,required:!0}),t.jsx(d,{id:"from_name",label:"Brach name (*)",register:r,errors:n,required:!0}),t.jsx(G,{checked:g("status"),id:"status",register:r})]})})})},z=()=>{const b=k(),[s,l]=p.useState(b),[i,r]=p.useState({key_search:"",status:""}),[o,u]=p.useState(!1),c=h(C,s,[]),g=h(E,s,0),n=[{field:"name",label:"Tên ứng dụng"},{field:"code",label:"Mã ứng dụng"},{field:"domain",label:"Domain"},{label:"Thời gian tạo",body:e=>f(e.created_at)},{label:"Thời gian cập nhật",body:e=>f(e.updated_at)},{label:"Trạng thái",field:"status",updateStatus:e=>y({status:e.status,id:e.id})}];return t.jsxs(M,{title:"Danh sách ứng dụng",children:[o&&t.jsx(w,{visibled:o,setVisibled:u,setParams:l}),t.jsxs(_,{setParams:l,filter:i,setFilter:r,sm:12,lg:6,children:[t.jsx(d,{lg:3,sm:6,label:"Tìm kiếm theo tên, mã",value:i.key_search,onChange:e=>r({...i,key_search:e.target.value})}),t.jsx(D,{lg:3,sm:6,label:"Trạng thái",options:T,value:i.status,onChange:e=>r({...i,status:e.target.value})})]}),t.jsx(F,{params:s,setParams:l,count:g,items:c,columns:n,setVisibleDialog:u,headerInfo:!0,actionInfo:{deleteAction:V}})]})};export{z as default};
