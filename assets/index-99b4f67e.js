import{r as p,j as t,a1 as x,a2 as S,G as C,M as F,a3 as T,a4 as A}from"./index-21568be7.js";import{u as y,b as g,r as k,a as D,F as P,B as M,T as v}from"./useGetParams-acf1653d.js";import{F as f}from"./FormInput-7f40563c.js";import{d as V,a as q,u as _,b as E,l as G,c as O}from"./index-7abeea52.js";import{F as w}from"./FormSwitch-9dbcd9cb.js";import{u as B}from"./index.esm-229c0b27.js";import{l as I}from"./index-6d2159f2.js";const m={name:"",code:"",my_service_id:"",status:!0},U=b=>{const{visibled:a,setVisibled:l,setParams:i,myServices:n}=b,{register:r,handleSubmit:c,reset:h,setValue:u,watch:o,formState:{errors:d}}=B({defaultValues:m}),e=y(V,{id:a},{});p.useEffect(()=>{if(typeof a=="number")for(const s in m)Object.hasOwnProperty.call(m,s)&&(s==="status"?u("status",e.status===1):u(s,e[s]+""||""))},[JSON.stringify(e)]);const j=s=>(s.status=s.status?1:0,typeof a=="number"?{...k(s,e),id:a}:s);return t.jsx(x,{checked:typeof a=="number",title:"công ty",visibled:a,setVisibled:l,setParams:i,handleSubmit:c,actions:{add:q,update:_},handleData:j,handleSuccess:()=>{i(s=>({...s,render:!s.render})),h(m)},children:t.jsx(S,{children:t.jsxs(C,{container:!0,spacing:2,children:[t.jsx(f,{id:"name",label:"Tên công ty (*)",register:r,errors:d,required:!0}),t.jsx(f,{id:"code",label:"Mã công ty (*)",register:r,errors:d,required:!0}),t.jsx(g,{id:"my_service_id",label:"Ứng dụng (*)",options:n,value:o("my_service_id"),register:r,errors:d,required:!0}),t.jsx(w,{checked:o("status"),id:"status",register:r})]})})})},Q=()=>{const b=D(),[a,l]=p.useState(b),[i,n]=p.useState({key_search:"",my_service_id:"",status:""}),[r,c]=p.useState(!1),h=y(G,a,[]),u=y(O,a,0),o=y(I,!1,[]),d=[{field:"name",label:"Tên công ty"},{field:"code",label:"Mã công ty"},{label:"Dịch vụ",body:e=>M(o,e.my_service_id)},{label:"Thời gian tạo",body:e=>v(e.created_at)},{label:"Thời gian cập nhật",body:e=>v(e.updated_at)},{label:"Trạng thái",field:"status",updateStatus:e=>_({status:e.status,id:e.id})}];return t.jsxs(F,{title:"Danh sách công ty",children:[r&&t.jsx(U,{visibled:r,setVisibled:c,setParams:l,myServices:o}),t.jsxs(P,{setParams:l,filter:i,setFilter:n,sm:6,children:[t.jsx(f,{lg:3,sm:6,label:"Tìm kiếm theo tên, mã",value:i.key_search,onChange:e=>n({...i,key_search:e.target.value})}),t.jsx(g,{lg:3,sm:6,label:"Ứng dụng",options:o,value:i.my_service_id,onChange:e=>n({...i,my_service_id:e.target.value})}),t.jsx(g,{lg:3,sm:6,label:"Trạng thái",options:T,value:i.status,onChange:e=>n({...i,status:e.target.value})})]}),t.jsx(A,{params:a,setParams:l,count:u,items:h,columns:d,setVisibleDialog:c,headerInfo:!0,actionInfo:{deleteAction:E}})]})};export{Q as default};
